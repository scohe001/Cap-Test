<!-- Toolbar -->
<mat-toolbar color="primary" class="header main-toolbar">
  <div [ngClass]="responsiveManager.isSideNavExpanded ? 'header-content-expanded' : 'header-content-contracted'">
    <span class="nav-tool-items nav-tool-items-butt" (click)="toggleClicked()">
      <mat-icon>menu</mat-icon>
    </span>
  </div>
</mat-toolbar>

<!-- Sidenav -->
<mat-sidenav-container>
  <!--
  <mat-sidenav #sidenav [mode]="isBiggerScreen() ? 'over' : 'push'" [(opened)]="sideNavOpened" [fixedInViewport]="true"
    [fixedTopGap]>
  -->
  <mat-sidenav
    #sidenav
    [mode]="isBiggerScreen() ? 'side' : 'push'"
    [(opened)]="responsiveManager.isSideNavOpened"
    [fixedInViewport]="true"
    class="main-sidenav"
    [@sideNavAnimation]="responsiveManager.isSideNavExpanded ? 'expanded' : 'contracted'"
    [fixedTopGap]="'0'"
    [fixedBottomGap]="'0'"
    >

    <mat-toolbar class="sidenav-header" routerLink="/">
      <span *ngIf="responsiveManager.isSideNavExpanded">Credit Cache</span>
      <span *ngIf="!responsiveManager.isSideNavExpanded">CC</span>
    </mat-toolbar>
    <mat-nav-list>
      <!--TODO: Remember that this will only be for non-mobile. Once the screen size gets
                reasonably tiny, we'll need to switch to a "push" sidenav that actually closes.
                Essentially, this all needs to be made responsive. Bleh.
      -->
      <!--Nav Options-->
      <a
        mat-list-item
        *ngFor="let navOption of sideNavOptions"
        [routerLink]="[navOption['link']]"
        (click)="closeSideNav()"
        [routerLinkActiveOptions]="{exact: false}"
        routerLinkActive
        #rla="routerLinkActive" 
        [ngClass]="rla.isActive && navOption['link'] !== '/' ? 'active-sidenav-item' : 'sidenav-item'">
        <!-- A little extra logic here^^^ so our test/examples won't seem active (since we have matching exact to false for register).
              Honestly a better way to do this may be to add a bool to "SideNavOption" for whether we want exact matching. That way
              we can configure this on an item by item basis and not need the wonky if.-->

        <mat-icon class="nav-icon"> {{navOption['icon']}} </mat-icon>
        <span *ngIf="responsiveManager.isSideNavExpanded"> {{navOption['name']}} </span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Main content -->
  <mat-sidenav-content [ngClass]="!responsiveManager.isSideNavOpened ? 'main-content-full' : responsiveManager.isSideNavExpanded ? 'main-content-expanded' : 'main-content-contracted'" class="main-content">

    <!-- Works, but not in sidenav for some reason :/ -->
    <!-- <div [@routeAnimations]="prepareRoute(outlet)" > -->
    <div class="router-content">
      <router-outlet #outlet="outlet"></router-outlet>
    </div>
    <!-- </div> -->

    <!-- This'll make sure the screen extends to the bottom -->
    <div class="space-taker"></div>

    <footer class="footer">
      <p class="footer-right"> Credit Cache {{versionNum}} </p>
    </footer>

  </mat-sidenav-content>

</mat-sidenav-container>
